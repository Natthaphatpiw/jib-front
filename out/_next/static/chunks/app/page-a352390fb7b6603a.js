(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1358:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var a=t(5155),r=t(2115),l=t(7924);function i(e){let{onSearch:s,isLoading:t,suggestions:i}=e,[n,d]=(0,r.useState)(""),[c,o]=(0,r.useState)(!1),[m,x]=(0,r.useState)(!1),h=(0,r.useRef)(null),u=e=>{d(e),s(e),x(!1)};return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),n.trim()&&(s(n),x(!1))},className:"relative",children:(0,a.jsxs)("div",{className:"relative flex items-center bg-white rounded-lg shadow-lg border transition-all duration-200 ".concat(c?"bg-[#F2F3FF] border-blue-500 shadow-xl":"border-gray-200"),children:[(0,a.jsx)("div",{className:"flex-1 relative",children:(0,a.jsx)("input",{ref:h,type:"text",value:n,onChange:e=>d(e.target.value),onFocus:()=>{o(!0),x(!0)},onBlur:()=>{o(!1),setTimeout(()=>x(!1),200)},placeholder:"อธิบายความต้องการของคุณ เช่น โน้ตบุ๊ค งบ 15000 ใช้ทำงานเป็นหลัก เน้นใช้ excel ทำงานโรงพยาบาลทั่วไป",className:"w-full px-6 py-4 text-lg bg-transparent border-none outline-none placeholder-gray-400 text-black",disabled:t})}),(0,a.jsx)("div",{className:"flex items-center pr-2",children:(0,a.jsx)("button",{type:"submit",disabled:t||!n.trim(),className:"flex items-center justify-center px-6 py-3 rounded-md text-white font-medium transition-all ".concat(t||!n.trim()?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 active:scale-95"),children:t?(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}):(0,a.jsx)(l.A,{size:20})})})]})}),m&&i.length>0&&(0,a.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-lg shadow-lg border border-gray-200 z-20 max-h-64 overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 px-3 py-2",children:"คำแนะนำการค้นหา"}),i.slice(0,5).map((e,s)=>(0,a.jsx)("button",{onClick:()=>u(e),className:"w-full text-left px-3 py-2 hover:bg-gray-100 rounded-md transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(l.A,{size:16,className:"text-gray-400 mr-2"}),(0,a.jsx)("span",{className:"text-gray-700",children:e})]})},s))]})})]})}var n=t(6766),d=t(3332),c=t(2657);function o(e){let{text:s,searchQuery:t}=e;if(!t||!s)return(0,a.jsx)(a.Fragment,{children:s});let r=RegExp("(".concat(t,")"),"gi"),l=s.split(r);return(0,a.jsx)(a.Fragment,{children:l.map((e,s)=>r.test(e)?(0,a.jsx)("span",{className:"bg-blue-100 text-blue-800 font-semibold px-1 rounded",children:e},s):e)})}function m(e){var s;let{product:t,searchQuery:r}=e,l=e=>new Intl.NumberFormat("th-TH").format(e);return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden group",children:[(0,a.jsxs)("div",{className:"relative aspect-square",children:[(0,a.jsx)(n.default,{src:t.image,alt:t.name,fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-300",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}),(0,a.jsx)("div",{className:"absolute top-2 left-2",children:(0,a.jsx)("span",{className:"bg-blue-600 text-white px-2 py-1 rounded text-xs font-medium",children:t.category})}),t.discount>0&&(0,a.jsx)("div",{className:"absolute top-2 right-2",children:(0,a.jsxs)("span",{className:"bg-red-500 text-white px-2 py-1 rounded text-xs font-medium flex items-center",children:[(0,a.jsx)(d.A,{size:12,className:"mr-1"}),"-",t.discount,"%"]})})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 line-clamp-2 mb-2 min-h-[3rem]",children:(0,a.jsx)(o,{text:t.name,searchQuery:r})}),(0,a.jsx)("div",{className:"text-sm text-gray-600 line-clamp-3 mb-4",children:(0,a.jsx)(o,{text:t.detail,searchQuery:r})}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mb-2",children:[t.brand," | ",t.warranty]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[t.price!==t.sellprice&&(0,a.jsxs)("span",{className:"text-sm text-gray-400 line-through",children:["฿",l(t.price)]}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,a.jsx)(c.A,{size:14,className:"mr-1"}),(s=t.views)>=1e3?"".concat((s/1e3).toFixed(1),"K"):s.toString()]})]}),(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"text-xl font-bold text-blue-600",children:["฿",l(t.sellprice)]})}),t.discount>0&&(0,a.jsxs)("div",{className:"text-sm text-green-600 font-medium",children:["ประหยัด ฿",l(t.price-t.sellprice)]})]}),(0,a.jsx)("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"block w-full mt-4 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors text-center",children:"ดูรายละเอียด"})]})]})}function x(){return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden animate-pulse",children:[(0,a.jsx)("div",{className:"aspect-square bg-gray-200"}),(0,a.jsxs)("div",{className:"p-4 space-y-3",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]}),(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3"}),(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded"})]})]})}function h(e){let{products:s,isLoading:t,searchQuery:r}=e;return t?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((e,s)=>(0,a.jsx)(x,{},s))}):0===s.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-gray-400 mb-4",children:(0,a.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ไม่พบสินค้าที่ตรงกับการค้นหา"}),(0,a.jsx)("p",{className:"text-gray-600",children:"ลองใช้คำค้นหาอื่น หรือปรับเปลี่ยนเงื่อนไขการค้นหา"})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["ผลการค้นหา (",s.length," รายการ)"]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:s.map(e=>(0,a.jsx)(m,{product:e,searchQuery:r},e.id))})]})}function u(){let[e,s]=(0,r.useState)(null),[t,l]=(0,r.useState)(!1),[n,d]=(0,r.useState)(""),c=async e=>{if(e.trim()){d(e),l(!0);try{let t=await fetch("".concat("http://localhost:8000","/search"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})});if(!t.ok)throw Error("Search failed");let a=await t.json();s(a)}catch(e){console.error("Search error:",e),s({products:[],explanation:"เกิดข้อผิดพลาดในการค้นหา",total_found:0,recommendations:[]})}finally{l(!1)}}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"JIB Computer Shop"}),(0,a.jsx)("p",{className:"text-xl text-gray-600",children:"ค้นหาสินค้าด้วย AI แบบอัจฉริยะ"})]}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsx)(i,{onSearch:c,isLoading:t,suggestions:[]}),e&&(0,a.jsxs)("div",{className:"mt-8",children:[e.explanation&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"ผลการค้นหา"}),(0,a.jsx)("p",{className:"text-gray-700",children:e.explanation}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["พบ ",e.total_found," รายการ"]})]}),e.recommendations&&e.recommendations.length>0&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,a.jsx)("h3",{className:"font-semibold text-green-900 mb-3",children:"สินค้าที่แนะนำ"}),(0,a.jsx)("div",{className:"space-y-2",children:e.recommendations.slice(0,3).map(e=>(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("span",{className:"font-medium text-green-800",children:["อันดับ ",e.rank,":"]}),(0,a.jsx)("span",{className:"text-green-700 ml-2",children:e.reasons.join(", ")})]},e.product_id))})]}),(0,a.jsx)(h,{products:e.products,isLoading:t,searchQuery:n})]})]})]})})}},2118:(e,s,t)=>{Promise.resolve().then(t.bind(t,1358))}},e=>{var s=s=>e(e.s=s);e.O(0,[236,441,684,358],()=>s(2118)),_N_E=e.O()}]);